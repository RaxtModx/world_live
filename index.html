<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Word Lives</title>
  <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore-compat.js"></script>
  <style>
    :root { --bg:#0b0b0b; --accent:#ff7a18; --panel:#111; --muted:#9a9a9a }
    body { margin:0; background:linear-gradient(180deg,var(--bg),#070707); color:#eee; font-family:Inter,system-ui,Segoe UI }
    header { display:flex; justify-content:space-between; align-items:center; padding:20px; background:#111; position:sticky; top:0; z-index:10; }
    .brand { font-weight:800; color:var(--accent); font-size:22px; }
    .btn { background:var(--accent); color:#111; border:0; padding:10px 16px; border-radius:10px; font-weight:700; cursor:pointer; transition:0.3s; }
    .btn:hover { background:#ffa94d; }
    main { max-width:1000px; margin:40px auto; padding:0 20px; }
    .mods { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:18px; }
    .mod-card { background:#121212; border-radius:10px; padding:16px; box-shadow:0 6px 14px rgba(0,0,0,0.5); transition:transform 0.2s; }
    .mod-card:hover { transform:translateY(-4px); }
    .mod-title { color:var(--accent); font-weight:700; font-size:18px; }
    .mod-desc { display:none; color:var(--muted); margin-top:8px; font-size:14px; line-height:1.4; }
    .view-more { margin-top:10px; background:none; border:1px solid var(--accent); color:var(--accent); padding:6px 10px; border-radius:6px; cursor:pointer; transition:0.3s; }
    .view-more:hover { background:var(--accent); color:#111; }
    .overlay { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); align-items:center; justify-content:center; z-index:50; }
    .panel { background:#0f0f0f; padding:24px; border-radius:12px; width:90%; max-width:400px; box-shadow:0 0 10px rgba(255,122,24,0.4); }
    .input { width:100%; padding:10px; border-radius:6px; border:1px solid #222; background:#0b0b0b; color:#fff; margin-bottom:12px; font-size:15px; }
    h3 { color:var(--accent); margin-top:0; }
  </style>
</head>
<body>
  <header>
    <div class="brand">Word Lives</div>
    <div>
      <button class="btn" id="btnAdmin">Panel Admin</button>
      <button class="btn" id="btnOwner">Panel Due√±o</button>
    </div>
  </header>
  <main>
    <h2>Bins disponibles</h2>
    <div class="mods" id="mods"></div>
  </main>

  <!-- Login Admin -->
  <div id="adminLogin" class="overlay">
    <div class="panel">
      <h3>Login Admin</h3>
      <input id="adminEmail" class="input" placeholder="Correo">
      <input id="adminPass" class="input" type="password" placeholder="Contrase√±a">
      <button class="btn" id="loginAdminBtn" style="width:100%">Entrar</button>
    </div>
  </div>

  <!-- Login Due√±o -->
  <div id="ownerLogin" class="overlay">
    <div class="panel">
      <h3>Login Due√±o</h3>
      <input id="ownerEmail" class="input" placeholder="Correo">
      <input id="ownerPass" class="input" type="password" placeholder="Contrase√±a">
      <button class="btn" id="loginOwnerBtn" style="width:100%">Entrar</button>
    </div>
  </div>

<script>
  // ‚úÖ Configuraci√≥n Firebase corregida
  const firebaseConfig = {
    apiKey: "AIzaSyBvfUIj4VJOnwFPHsGZvXSSQ8CIIg5Gabk",
    authDomain: "word-lives.firebaseapp.com",
    projectId: "word-lives",
    storageBucket: "word-lives.appspot.com",
    messagingSenderId: "792720149975",
    appId: "1:792720149975:web:53e90b7e2d6709c59c8f92"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  const modsContainer = document.getElementById("mods");

  // üîπ Cargar mods correctamente
  async function loadMods() {
    const snap = await db.collection("mods").orderBy("date", "desc").get();
    modsContainer.innerHTML = "";
    snap.forEach(doc => {
      const data = doc.data();
      const card = document.createElement("div");
      card.className = "mod-card";
      card.innerHTML = `
        <div class="mod-title">${data.title}</div>
        ${data.image ? `<img src="${data.image}" style="width:100%;border-radius:8px;margin-top:8px;">` : ""}
        <button class="view-more">Ver m√°s</button>
        <div class="mod-desc">${data.desc || data.description || ""}</div>
      `;
      const btn = card.querySelector(".view-more");
      const desc = card.querySelector(".mod-desc");
      btn.onclick = () => {
        const visible = desc.style.display === "block";
        desc.style.display = visible ? "none" : "block";
        btn.textContent = visible ? "Ver m√°s" : "Ver menos";
      };
      modsContainer.appendChild(card);
    });
  }
  loadMods();

  // üîπ Mostrar paneles
  const adminLogin = document.getElementById("adminLogin");
  const ownerLogin = document.getElementById("ownerLogin");

  document.getElementById("btnAdmin").onclick = () => adminLogin.style.display = "flex";
  document.getElementById("btnOwner").onclick = () => ownerLogin.style.display = "flex";

  // üîπ Login Admin
  document.getElementById("loginAdminBtn").onclick = async () => {
    const e = document.getElementById("adminEmail").value.trim();
    const p = document.getElementById("adminPass").value;
    try {
      await auth.signInWithEmailAndPassword(e, p);
      window.location.href = "panel_admin.html";
    } catch (err) {
      alert("Error al iniciar sesi√≥n: " + err.message);
    }
  };

  // üîπ Login Due√±o
  document.getElementById("loginOwnerBtn").onclick = async () => {
    const e = document.getElementById("ownerEmail").value.trim();
    const p = document.getElementById("ownerPass").value;
    try {
      await auth.signInWithEmailAndPassword(e, p);
      window.location.href = "panel_dueno.html";
    } catch (err) {
      alert("Error al iniciar sesi√≥n: " + err.message);
    }
  };

  // üîπ Cerrar login si haces click afuera
  window.onclick = (e) => {
    if (e.target === adminLogin) adminLogin.style.display = "none";
    if (e.target === ownerLogin) ownerLogin.style.display = "none";
  };
</script>

</body>
</html>
